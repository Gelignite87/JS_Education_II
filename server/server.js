(()=>{var t={508:function(t,s,e){const r=e(860).Router(),i=e(147);r.get("/",((t,s)=>{i.readFile("./src/files/db/userCart.json","utf-8",((t,e)=>{t?s.sendStatus(404,JSON.stringify({result:0,text:t})):s.send(e)}))})),r.post("/",((t,s)=>{i.readFile("./src/files/db/userCart.json","utf-8",((e,r)=>{if(e)s.sendStatus(404,JSON.stringify({result:0,text:e}));else{const e=JSON.parse(r),n=(t,s)=>(t.contents.push(s.body),JSON.stringify(t,null,4));i.writeFile("./src/files/db/userCart.json",n(e,t),(t=>{t?s.send('{"result": 0}'):s.send('{"result": 1}')}))}}))})),r.put("/:id",((t,s)=>{i.readFile("./src/files/db/userCart.json","utf-8",((e,r)=>{if(e)s.sendStatus(404,JSON.stringify({result:0,text:e}));else{const e=JSON.parse(r),n=(t,s)=>(this.find=t.contents.find((t=>t.id_product===+s.params.id)),this.find.quantity+=s.body.quantity,JSON.stringify(t,null,4));i.writeFile("./src/files/db/userCart.json",n(e,t),(t=>{t?s.send('{"result": 0}'):s.send(`{"result": 1, "quantity": ${this.find.quantity}}`)}))}}))})),r.delete("/:id",((t,s)=>{i.readFile("./src/files/db/userCart.json","utf-8",((e,r)=>{if(e)s.sendStatus(404,JSON.stringify({result:0,text:e}));else{const e=JSON.parse(r),n=(t,s)=>{let e=t.contents.find((t=>t.id_product===s.body.id_product));return t.contents.splice(t.contents.indexOf(e),1),JSON.stringify(t,null,4)};i.writeFile("./src/files/db/userCart.json",n(e,t),(t=>{t?s.send('{"result": 0}'):s.send('{"result": 1}')}))}}))})),t.exports=r},561:(t,s,e)=>{const r=e(860).Router(),i=e(147);r.get("/:id",((t,s)=>{i.readFile(`./src/files/images/${t.params.id}`,((t,e)=>{t?s.sendStatus(404,JSON.stringify({result:0,text:t})):(s.statusCode=200,s.setHeader("Content-Type","image/jpeg"),s.end(e))}))})),t.exports=r},860:t=>{"use strict";t.exports=require("express")},245:t=>{"use strict";t.exports=require("moment")},147:t=>{"use strict";t.exports=require("fs")}},s={};function e(r){var i=s[r];if(void 0!==i)return i.exports;var n=s[r]={exports:{}};return t[r].call(n.exports,n,n.exports,e),n.exports}(()=>{const t=e(860),s=t(),r=e(147),i=e(508),n=e(561);s.use(t.json()),s.use("/",t.static("./dist/")),s.use("/api/cart",i),s.use("/images",n),s.get("/api/products",((t,s)=>{r.readFile("./src/files/db/products.json","utf-8",((t,e)=>{t?s.send(JSON.stringify({result:0,text:t})):s.send(e)}))}));const u=e(245);lastData=()=>console.log(`Время на сервере: ${u().format("dddd DD.MM.YY H:mm")} port ${d}`),setInterval(lastData,3e5);const d=process.env.PORT||4e3;s.listen(d,(()=>{console.log(`Listening ${d} port`),lastData()}))})()})();